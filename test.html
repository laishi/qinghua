<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SVG 波浪动画</title>
  <style>
    body {
      margin: 0;
      display: flex;
      justify-content: space-around;
      align-items: center;
      height: 100vh;
      background: #f0f0f0;
    }
    svg {
      border: 1px solid #ccc;
    }
    .container {
      text-align: center;
    }
    h3 {
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h3>三次贝塞尔曲线波浪（平滑版）</h3>
    <svg id="bezier-wave" width="400" height="200"></svg>
  </div>
  <div class="container">
    <h3>100个点波浪</h3>
    <svg id="points-wave" width="400" height="200"></svg>
  </div>

  <script>
    // 三次贝塞尔曲线波浪（平滑版）
    const bezierSvg = document.getElementById('bezier-wave');
    const bezierPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    bezierSvg.appendChild(bezierPath);

    function updateBezierWave(t) {
      const width = 400, height = 200;
      const waveHeight = 30, waveLength = width / 2;
      const points = [];
      // 增加控制点到 40 个，确保平滑波浪
      for (let x = 0; x <= width; x += width / 40) {
        const y = height / 2 + waveHeight * Math.sin((x / waveLength) * Math.PI + t * 0.01);
        points.push({ x, y });
      }
      let d = `M ${points[0].x},${points[0].y}`;
      for (let i = 0; i < points.length - 1; i++) {
        const xMid = (points[i].x + points[i + 1].x) / 2;
        const yMid = (points[i].y + points[i + 1].y) / 2;
        // 优化控制点，使曲线更平滑
        const cpX1 = points[i].x + (points[i + 1].x - points[i].x) * 0.25;
        const cpX2 = points[i].x + (points[i + 1].x - points[i].x) * 0.75;
        const cpY1 = points[i].y + (points[i + 1].y - points[i].y) * 0.25;
        const cpY2 = points[i + 1].y - (points[i + 1].y - points[i].y) * 0.25;
        d += ` C ${cpX1},${cpY1} ${cpX2},${cpY2} ${points[i + 1].x},${points[i + 1].y}`;
      }
      d += ` L ${width},${height} L 0,${height} Z`;
      bezierPath.setAttribute('d', d);
      bezierPath.setAttribute('fill', 'rgba(0, 150, 255, 0.5)');
    }

    // 100个点波浪
    const pointsSvg = document.getElementById('points-wave');
    const pointsPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    pointsSvg.appendChild(pointsPath);

    function updatePointsWave(t) {
      const width = 400, height = 200;
      const points = [];
      for (let i = 0; i <= 100; i++) {
        const x = (i / 100) * width;
        const y = height / 2 + 30 * Math.sin((x / width) * Math.PI * 2 + t * 0.01);
        points.push({ x, y });
      }
      let d = `M ${points[0].x},${points[0].y}`;
      for (let i = 1; i < points.length; i++) {
        d += ` L ${points[i].x},${points[i].y}`;
      }
      d += ` L ${width},${height} L 0,${height} Z`;
      pointsPath.setAttribute('d', d);
      pointsPath.setAttribute('fill', 'rgba(255, 100, 100, 0.5)');
    }

    // 动画循环
    let t = 0;
    function animate() {
      updateBezierWave(t);
      updatePointsWave(t);
      t++;
      requestAnimationFrame(animate);
    }
    animate();
  </script>
</body>
</html>